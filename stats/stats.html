<!--
elfrey miss
elfrey 2
elfrey 3
elfrey block
elfrey to
elfrey rebound
elfrey steal
elfrey ftmiss
elfrey ft
elfrey as
-->

<!--  0   Name
      1   Points
      2   Shots Made
      3   Shots Attempted
      4   FT Made
      5   FT Attempted
      6   Assists
      7   Rebounds
      8   Blocks
      9   Steals
      10  Turnovers -->

<html>
<head>
  <title> Easy Basketball Stats </title>

  <link rel="stylesheet" style="text/css" href="theme.css"/>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
  </script>
  <script type="text/javascript">
    undo = "";
    function changeStats(){
      var str = $("#input_text").val();
      $("#input_text").select();
      var str_split = str.split(" ");
      if (str_split.length != 2){
        return false
      }
      var name = str_split[0].toLowerCase();
      var action = str_split[1].toLowerCase();

      var arr = [0,0,0,0,0,0,0,0,0,0,0];
      if      (action[0]=="m"){ arr[2] += 1; }    // miss
      else if (action[0]=="b"){ arr[7] += 1; }    // block
      else if (action[0]=="t"){ arr[9] += 1; }    // turnover
      else if (action[0]=="r"){ arr[6] += 1; }    // rebound
      else if (action[0]=="s"){ arr[8] += 1; }    // steal
      else if (action[0]=="a"){ arr[5] += 1; }    // assists
      else if (action=="foul"){ arr[10] += 1; }//fouls

      else if (action == "2" || action == "3"){
        arr[0] += parseInt(action);
        arr[1] += 1;
        arr[2] += 1;
      }
      else if (action == "ft"){
        arr[0] += 1;
        arr[3] += 1;
        arr[4] += 1;
      }
      else if (action == "ftmiss"){
        arr[4] += 1;
      }
      else {
        return false;
      }

      // updates the latest action
      $("#latest").html(name+" "+action);


      var rows = ["name","points","shots_made","shots_attempted","ft_made","ft_attempted","assists","rebounds",
                  "blocks","steals","turnovers", "fouls"];

      var row = $("#"+name);
      if (row.html() == null){
        // $("#stats_table").append("<p> Hello World! </p>");
        var new_row = "<tr id='"+name+"'> <td class='"+rows[0]+"'>"+name+"</td>";
        for (var i = 1; i < rows.length; i++) {
          new_row += "\n <td class='"+rows[i]+"'>"+arr[i-1]+"</td>";
        };
        new_row += "\n </tr>";
        $("#stats_table").append(new_row);
      }
      else {
        for (var i = 1; i < rows.length; i++) {
          var selection = "#"+name+" ."+rows[i]
          var previous = $(selection).html();
          $(selection).html(String(parseInt(previous)+arr[i-1]));
        };
      }

    }
    
  </script>
</head>
<header>
  <h1> Easy Basketball Stats </h1>
</header>
<body>
  <p>
    The purpose of this site is to make it easy for you to keep track of basketball stats during a game. <br/>
    When a player does something, type in their name and action in the input below.
    Don't leave this page if you want to keep your stats.<br/>
    Follow this format: <b>name action</b> <br/>
    Shortcuts are allowed. For example, typing in "elfrey b" means that the player named elfrey will be added one block.
    <br/>
    However, you can't have any spaces for the name. So either put only their first name or take out the spaces. <br/>
    <br/>
    "name <b>2</b>" -> made a two pointer<br/>
    "name <b>3</b>" -> made a three pointer <br/>
    "name <b>m</b>iss" -> missed a shot<br/>
    "name <b>ft</b>" -> made a free throw <br/>
    "name <b>ftmiss</b>" -> missed a free throw <br/>
    "name <b>a</b>ssist" -> got an assist <br/>
    "name <b>r</b>ebound" -> got a rebound <br/>
    "name <b>b</b>lock" -> got a block <br/>
    "name <b>s</b>teal" -> got a steal <br/>
    "name <b>t</b>urnover" -> committed a turnover <br/>
    "name <b>foul</b>" -> committed a foul <br/>
  </p>
  <form action="" onsubmit="changeStats(); return false;">
    <input type="text" id="input_text">
    <input type="submit" value="Submit">
  </form>
  <p> Latest action: <span id="latest"></span> </p>

  <table id="stats_table" border="1">
    <tr>
      <th> Name </th>
      <th> Points </th>
      <th> Shots Made </th>
      <th> Shots Attempted </th>
      <th> FT Made </th>
      <th> FT Attempted </th>
      <th> Assists </th>
      <th> Rebounds </th>
      <th> Blocks </th>
      <th> Steals </th>
      <th> Turnovers </th>
      <th> Fouls </th>
    </tr><!-- 
    <tr id="elfrey">
      <td class="name"> Elfrey </td>
      <td class="points"> 6 </td>
      <td class="shots_made"> 4 </td>
      <td class="shots_attempted"> 3 </td>
      <td class="ft_made"> 4 </td>
      <td class="ft_attempted"> 3 </td>
      <td class="assists"> 3 </td>
      <td class="rebounds"> 4 </td>
      <td class="blocks"> 3 </td>
      <td class="steals"> 3 </td>
      <td class="turnovers"> 3 </td>
    </tr> -->


  </table>

</body>
</html>